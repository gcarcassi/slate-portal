{%extends "base.html"%}

{%block title%}
  Testing
{%endblock%}

{%block body%}
<section id="testing" class="bg-light">
  <div class="container">
    <div class="page-header">
      <h1>Testing</h1>
    </div>

    <div class="row">
      <div class="col-md-6 col-md-offset-3">
        <form role="form" action="{{url_for('testing')}}" method="POST">
          <div class="form-group">
            <label for="name">Look Up User by ID</label>
            <p class='text-muted'>Ex: 3acc9bdc-1243-40ea-96df-373c8a616a16</p>
            <input
              type="text"
              class="form-control"
              id="name"
              name="name"
              placeholder="user ID"
              required="required"
              tabindex="1"
            >
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-primary">Search</button>
          </div>
        </form>
      </div>

    </div>
  </div>
</section>

<script>

window.onload = get_states();

function get_states(){
  $.ajax({
    url: "http://128.135.158.222:18080/v1alpha1/users?token=3acc9bdc-1243-40ea-96df-373c8a616a16",
    type: "get",
    dataType: 'json',
    success: function(data){
      if(data.items){
         $('#test').html(data.items);
      }

    },
    error: function(xhr){
      //Do Something to handle error
    }
  });
}

// $(document).ajaxComplete(function(){
//   if($('#test').length != 0){
//     $('#test').css('color', 'red');
//   }
// });

</script>
{%endblock%}
